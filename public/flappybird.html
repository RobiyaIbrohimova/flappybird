<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Bird Game</title>
<style>
    body, html {
    height: 100%;
    margin: 0;
    background-image: url('img.webp'); /* Background image set */
    background-size: cover;
    background-position: center;
    overflow: hidden;
}

#game-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background-image: url('your-background-image.jpg'); /* Path to your background image */
    background-size: cover;
}
.score {
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 24px;
    color: white;
    z-index: 10; /* Ensure the score is always on top */
}
.difficulty {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 10; /* Ensure the buttons are always on top */
}
.difficulty button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #4CAF50;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .difficulty button:hover {
            background-color: #45a049;
        }
        .difficulty button:active {
            transform: scale(0.95);
        }
.bird {
    width: 64.5px;
    height: 80px;
    background-image: url(img.png); /* Placeholder for your bird image */
    background-size: cover;
    position: absolute;
    top: 50%; 
    left: 50px; 
    transform: translateY(-50%);
    z-index: 2;
    animation: runAnimate 1s steps(5) infinite;
}

@keyframes runAnimate {
    from {
        background-position: 0;
    }
    to {
        background-position: -350px;
    }
}
.block {
    position: absolute;
    width: 30px; /* Block width */
    background-color: grey; /* Block color */
}

.upper {
    top: 0;
    height: 30%; /* Example height, adjust based on game design */
}

.lower {
    bottom: 0;
    height: 50%; /* Example height, adjust based on game design */
}

/* .bird {
    border: 1px solid red;
} */

</style>
<link rel="stylesheet" href="styles.css">
</head>
<body>
   <div id="game-container">
        <div class="bird"></div>
    </div>
<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const gameContainer = document.getElementById('game-container');
    const bird = document.querySelector('.bird');
    let birdY = window.innerHeight / 2;
    bird.style.top = `${birdY}px`; // Set initial bird position

    const blockWidth = 30;
    const difficulties = {
        easy: { gap: 250, speed: 2, gravity: 1 },
        medium: { gap: 200, speed: 2.3, gravity: 1 },
        hard: { gap: 150, speed: 3, gravity: 1 },
    };
    let difficulty = 'medium'; // Default difficulty level
    let blockSpacing = 200; // Desired space between blocks
    let lastBlockX = window.innerWidth; // Initialize last block position
    let score = 0;
    let gameOver = false;
    let gapHeight = difficulties[difficulty].gap;
    let speed = difficulties[difficulty].speed;
    let gravity = difficulties[difficulty].gravity;

    // Create a score element
    const scoreElement = document.createElement('div');
    scoreElement.className = 'score';
    scoreElement.style.position = 'absolute';
    scoreElement.style.top = '20px';
    scoreElement.style.left = '20px';
    scoreElement.style.fontSize = '24px';
    scoreElement.style.color = 'white';
    gameContainer.appendChild(scoreElement);
    scoreElement.textContent = `Score: ${score}`;

    // Create a difficulty selection element
    const difficultyElement = document.createElement('div');
    difficultyElement.className = 'difficulty';
    difficultyElement.style.position = 'absolute';
    difficultyElement.style.top = '20px';
    difficultyElement.style.right = '20px';
    difficultyElement.style.fontSize = '18px';
    difficultyElement.style.color = 'white';
    gameContainer.appendChild(difficultyElement);

    // Add difficulty buttons
    ['easy', 'medium', 'hard'].forEach(level => {
        const button = document.createElement('button');
        button.textContent = level.charAt(0).toUpperCase() + level.slice(1);
        button.style.margin = '0 5px';
        button.onclick = () => setDifficulty(level);
        difficultyElement.appendChild(button);
    });

    function setDifficulty(level) {
        difficulty = level;
        gapHeight = difficulties[difficulty].gap;
        speed = difficulties[difficulty].speed;
        gravity = difficulties[difficulty].gravity;
        resetGame();
    }

    function resetGame() {
        gameOver = false;
        score = 0;
        scoreElement.textContent = `Score: ${score}`;
        birdY = window.innerHeight / 2;
        bird.style.top = `${birdY}px`;
        lastBlockX = window.innerWidth;
        const blocks = document.querySelectorAll('.block');
        blocks.forEach(block => block.remove());
        for (let i = 0; i * (blockWidth + blockSpacing) < window.innerWidth; i++) {
            createBlock(window.innerWidth + i * (blockWidth + blockSpacing));
        }
        requestAnimationFrame(updateGame);
    }

    function flyUp() {
        if (!gameOver) {
            birdY -= 60; // The bird moves up by 60px on click
            bird.style.top = `${birdY}px`;
        }
    }

    function updateGame() {
        if (!gameOver) {
            moveBlocks();
            birdY += gravity;  // Simulate gravity effect
            bird.style.top = `${birdY}px`;
            checkCollision(); // Check for collisions
            requestAnimationFrame(updateGame);  // Continue the game loop
        }
    }

    function createBlock(xPos) {
        let upperHeight = Math.random() * (window.innerHeight - gapHeight - 200) + 50; // Randomly calculate top block height
        let lowerHeight = window.innerHeight - upperHeight - gapHeight; // Calculate corresponding bottom block height

        let upperBlock = document.createElement('div');
        upperBlock.className = 'block upper';
        upperBlock.style.height = `${upperHeight}px`;
        upperBlock.style.width = `${blockWidth}px`;
        upperBlock.style.left = `${xPos}px`;

        let lowerBlock = document.createElement('div');
        lowerBlock.className = 'block lower';
        lowerBlock.style.height = `${lowerHeight}px`;
        lowerBlock.style.width = `${blockWidth}px`;
        lowerBlock.style.left = `${xPos}px`;

        gameContainer.appendChild(upperBlock);
        gameContainer.appendChild(lowerBlock);
    }

    function moveBlocks() {
        let blocks = document.querySelectorAll('.block');
        blocks.forEach(block => {
            let x = parseInt(block.style.left, 10) - speed; // Move block to the left based on difficulty speed
            block.style.left = `${x}px`;
            if (x + blockWidth < 0) {
                gameContainer.removeChild(block); // Remove blocks that are off-screen

                // Increment score for each pair of blocks that moves off-screen
                if (block.className.includes('upper')) {
                    score++;
                    scoreElement.textContent = `Score: ${score}`;
                }
            }
        });

        // Check if a new block needs to be created based on the last block's position
        if (blocks.length === 0 || parseInt(blocks[blocks.length - 1].style.left, 10) <= window.innerWidth - blockSpacing) {
            createBlock(window.innerWidth); // Create a new block at the right edge of the screen
        }
    }

    function checkCollision() {
        let birdRect = bird.getBoundingClientRect();
        let blocks = document.querySelectorAll('.block');

        blocks.forEach(block => {
            let blockRect = block.getBoundingClientRect();
            if (
                birdRect.left < blockRect.left + blockRect.width &&
                birdRect.left + birdRect.width > blockRect.left &&
                birdRect.top < blockRect.top + blockRect.height &&
                birdRect.top + birdRect.height > blockRect.top
            ) {
                gameOver = true;
                alert(`Game Over! Your score was: ${score}`);
                // Optionally, you can add logic to reset the game or reload the page
                // location.reload(); // Uncomment this line to reload the page and restart the game
            }
        });
    }

    document.body.addEventListener('click', flyUp);

    // Create initial blocks to fill the screen
    for (let i = 0; i * (blockWidth + blockSpacing) < window.innerWidth; i++) {
        createBlock(window.innerWidth + i * (blockWidth + blockSpacing));
    }

    requestAnimationFrame(updateGame); // Start the game loop
});

</script>
</body>
</html>
